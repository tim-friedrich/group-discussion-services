<h1>Diskussion bearbeiten</h1>

<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li class="active"><a href="#general_informations" data-toggle="tab">Allgemeine Informationen</a></li>
  <li><a href="#users" data-toggle="tab">Teilnehmer</a></li>
  <li><a href="#visual_aids" data-toggle="tab">Anschauungsmaterial</a></li>
</ul>

<!-- Tab panes -->
<div class="tab-content">
  <div class="tab-pane fade in active" id="general_informations">
    <%= render 'form' %>
  </div>

  <div class="tab-pane fade" id="users">
    <h2>Teilnehmer</h2>

    <%= render partial: "discussions_users/email_invitation", locals: { discussions_users: @user, role: "proband" } %>

    <p>Laden Sie Probanden, die sich noch nicht registriert haben zu dieser Diskussion ein</p>

    <%= render partial: "discussions_users/invite", locals: { discussions_user: @proband, role: @proband_role.id, users: @users, discussion_id: @discussion.id } %>

    <p>Wählen Sie einen bereits von Ihnen eingeladenen Probanden aus</p>

    <div class="probands_list">
      <%= render partial: "discussions_users/list_users", locals: { discussions_users: @probands, id: "probands", page_name: "probands_page" } %>
    </div>

    <h2>Beobachter</h2>

    <%= render partial: "discussions_users/email_invitation", locals: { discussions_users: @user, role: "observer" } %>
    <p>Laden Sie Probanden, die sich noch nicht registriert haben zu dieser Diskussion ein</p>


    <%= render partial: "discussions_users/invite", locals: { discussions_user: @proband, role: @observer_role.id, users: @users, discussion_id:@discussion.id } %>

    <div class="observers_list">
      <%= render partial: "discussions_users/list_users", locals: { discussions_users: @observers, id: "observers", page_name: "observers_page" } %>
    </div>
  </div>


  <div class="tab-pane fade" id="visual_aids">

    <h2>Anschauungsmaterial</h2>

    <span class="btn btn-success fileinput-button disabled">
      <i class="glyphicon glyphicon-plus"></i>
      <span>Select files...</span>
      <input id="fileupload" type="file" name="files[]" multiple="">
      <input id="visual_aid_discussion_id" name="visual_aid[discussion_id]" type="hidden" value="<%= @discussion.id %>">
    </span>

    <div class="alert alert-danger hidden" id="not-supported-file" role="alert">Die der von Ihnen ausgewählte Dateityp wird nicht unterstützt. Bitte wählen sie eine Bilddatei oder Videodatei.</div>
    <div class="visual_aids_list">
      <%= render partial: "visual_aids/list", locals: { visual_aids: @visual_aids } %>
    </div>
  </div>
</div>


<%= link_to 'Zurück', "/profile" %>


<%= javascript_tag do %>
  $(document).ready(function(){ init_edit_discussion(<%= @discussion.id %>) });
<% end %>